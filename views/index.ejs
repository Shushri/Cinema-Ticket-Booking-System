<!DOCTYPE html>
<html>
<head>
  <title>Cinema Database</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <h1>ðŸŽ¬ Cinema Database System</h1>

  <form action="/view" method="POST">
    <label for="table">Choose Table:</label>
    <select name="table" required>
      <option value="">-- Select Table --</option>
      <option value="Movies">Movies</option>
      <option value="Theaters">Theaters</option>
      <option value="Showtimes">Showtimes</option>
      <option value="Bookings">Bookings</option>
    </select>
    <button type="submit">View Table</button>
  </form>

  <% if (error) { %>
    <div class="error"><%= error %></div>
  <% } %>

  <% if (data && data.length > 0) { %>
    <h2><%= table %> Table</h2>
    <table>
      <tr>
        <% Object.keys(data[0]).forEach(col => { %>
          <th><%= col %></th>
        <% }) %>
        <th>Actions</th>
      </tr>

      <% data.forEach(row => { %>
        <tr>
          <% Object.values(row).forEach(value => { %>
            <td><%= value %></td>
          <% }) %>
          <td>
            <a href="/edit/<%= table %>/<%= row[pk] %>" class="edit-btn">Edit</a>
            <form action="/delete/<%= table %>/<%= row[pk] %>" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this record?');">
              <button type="submit" class="delete-btn">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </table>

    <a href="/add/<%= table %>" class="add-btn">+ Add New Record</a>
  <% } %>
</body>
</html>
